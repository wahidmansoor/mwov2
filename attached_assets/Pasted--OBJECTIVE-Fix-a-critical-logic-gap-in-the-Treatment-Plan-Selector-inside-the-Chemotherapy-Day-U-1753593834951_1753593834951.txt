ğŸ¯ OBJECTIVE:
Fix a critical logic gap in the Treatment Plan Selector inside the Chemotherapy Day Unit (CDU) module: Currently, selecting `Adjuvant` or `Neoadjuvant` intent results in **no treatment recommendation**, even for common scenarios where evidence-based treatments are well-established (e.g., ER+/PR+ Stage II breast cancer). This must be resolved to meet NCCN/ESMO/ASCO clinical guidance standards.

---

âœ… CONTEXT:
- The platform uses `treatment_plan_mappings` to serve treatment recommendations based on structured criteria (cancer_type, stage, biomarkers, intent, etc.).
- However, mappings are currently sparse or incomplete for treatment_intent = `Adjuvant` or `Neoadjuvant`.
- Clinical users are confused when selecting `Adjuvant` produces no result, even though the same case returns a protocol if `Curative` is chosen.

---

ğŸ§  CLINICAL REALITY:
- **Curative** is not interchangeable with **Adjuvant** or **Neoadjuvant**. These are:
  - Distinct **clinical intents**
  - Often tied to **specific protocols**
  - Required for **NCCN, ESMO, ASCO**-compliant logic

Example: For Stage II ER+/PR+ HER2- breast cancer:
- `Adjuvant` â†’ AC-T is standard
- `Neoadjuvant` â†’ AC-T or AC followed by weekly Taxol
- `Curative` is **too ambiguous** for precise clinical alignment

---

ğŸš¨ PROBLEM STATEMENT:
1. Missing mappings for `Adjuvant` and `Neoadjuvant` in `treatment_plan_mappings`
2. UI/UX gives no feedback when no result is returned
3. No AI fallback logic to infer equivalent protocol when explicit mapping is absent

---

ğŸ› ï¸ ACTION PLAN:

### 1. ğŸ—ƒï¸ Mapping Database Expansion
- Clone existing `Curative` mappings to generate complete rows for `Adjuvant` and `Neoadjuvant` where applicable
- Insert rows with:
  - Same protocol, biomarkers, stage, histology
  - Changed `treatment_intent` field

#### Example SQL:
```sql
INSERT INTO treatment_plan_mappings (
  cancer_type, histology, biomarkers, treatment_intent,
  line_of_treatment, treatment_protocol, evidence_reference,
  nccn_reference, conflicting_biomarkers, required_stage,
  confidence_score, is_active, toxicity_level, priority_tag
)
SELECT
  cancer_type, histology, biomarkers, 'Adjuvant',
  line_of_treatment, treatment_protocol, evidence_reference,
  nccn_reference, conflicting_biomarkers, required_stage,
  confidence_score, is_active, toxicity_level, priority_tag
FROM treatment_plan_mappings
WHERE treatment_intent = 'Curative'
  AND cancer_type = 'Breast Cancer'
  AND treatment_protocol = 'FEC-D';
Repeat for "Neoadjuvant" and other common regimens.

2. ğŸ§  AI Fallback Logic (Optional but Ideal)
Implement AI logic that:

If no direct match for Adjuvant, checks if an identical match exists under Curative intent

Returns that with a note:

â€œNo explicit Adjuvant match found. Showing closest equivalent protocol under Curative intent (confidence: 93%).â€

Applies only when biomarker + stage + histology match exactly

3. ğŸ“¦ Treatment Matching Logic Improvements
Update selector backend logic:

Match treatment_intent strictly by default

Fallback to hierarchical matching (Adjuvant <â†’ Curative) only when no direct mapping is found and fallback_enabled = true

4. ğŸ–¥ï¸ UI/UX Feedback Enhancements
When no treatment is found:

Show inline message:

â€œNo mapped treatment found for this intent. Please try an alternate treatment intent or consult guidelines.â€

If fallback logic is used, show a banner or AI note:

â€œAI suggested equivalent protocol based on similar clinical profile (intent substituted from 'Curative').â€

Keep Generate PDF, Share Summary, Print View buttons disabled unless result is shown

5. âœ… Regression & QA Test Scenarios
Create 10 automated tests to verify:

Adjuvant/Neoadjuvant returns correct treatment if explicitly mapped

Curative fallback returns a result if fallback is enabled

No treatment = visible alert

Buttons (Generate PDF, etc.) activate only when treatment is found

Exported content reflects AI fallback flag where applicable

ğŸ“ˆ EXPECTED OUTCOME:

All treatment intents now return valid results if clinically applicable

Curative mappings are no longer misused as a default

UI experience is improved with helpful fallback messaging and validation

System remains aligned with NCCN, ASCO, ESMO-style decision support

ğŸ§ª CLINICAL TEST CASES TO VALIDATE:

Breast Cancer, Stage II, ER+/PR+, HER2-, Adjuvant â†’ AC-T âœ…

Breast Cancer, Stage III, ER-/PR-/HER2-, Neoadjuvant â†’ AC-T âœ…

Colon Cancer, Stage III, Adjuvant â†’ FOLFOX âœ…

Ovarian Cancer, Stage III, Neoadjuvant â†’ Carboplatin + Paclitaxel âœ…

NSCLC, Stage IIIA, Neoadjuvant â†’ Cisplatin + RT Â± IO âœ…

ğŸ“Œ Final Notes:
Ensure AI-generated fallback results are:

Clearly labeled

Exportable

Traceable to source NCCN reference

This will make the platform clinically robust, fail-safe, and user-trustworthy.